var selected_division=null,selected_product=null,object_divisions=new Array(),arr_products=new Array();function showLoading(){$(".loading-container").hide()}function hideLoading(){$(".loading-container").hide()}$(document).ajaxStart(function(){showLoading()});$(document).ajaxSuccess(function(){hideLoading()});function loadProducts(){$.ajax({url:"data/products.json",type:"get",dataType:"json",async:false,success:function(a){arr_products=a.product}})}function loadDivisions(){$.ajax({url:"data/divisions.json",type:"get",dataType:"json",async:false,success:function(a){object_divisions=a.division}})}function showDivisionSideBar(c){var a="";for(i=0;i<object_divisions.length;i++){var b="";if("undefined"!==typeof object_divisions[i].divisionName){b=object_divisions[i].divisionName}console.log(b);a+='  <li data-icon="false"><a class="eachDivision" data-division="'+object_divisions[i].divisionId+'" href="">'+b;a+="</a></li>"}$("#"+c).html(a);$("#"+c).listview("refresh")}function showProductsSideBar(b){var a="";for(i=0;i<arr_products.length;i++){var c="";if("undefined"!==typeof arr_products[i].name){c=arr_products[i].name}if(arr_products[i].division==b){a+='  <li data-icon="false"><a class="eachProductInPrdtPage" data-division="'+arr_products[i].division+'" data-product="'+i+'" href="">'+c;a+="</a></li>"}}$("#ui-productsList").html(a)}$(document).on("pageshow","#intro",function(){var a="";loadDivisions();loadProducts();showDivisionSideBar("ui-serviceList")});var currentProduct={};var currentdivision={};var divisions_name="";$(document).on("click",".eachDivision",function(c){showLoading();var b=$(this).data("division");for(i=0;i<object_divisions.length;i++){if(object_divisions[i].divisionId==b){divisions_name=object_divisions[i].divisionName;currentdivision=object_divisions[i];break}}$("#titleDiv").html(divisions_name);var a="";for(i=0;i<arr_products.length;i++){if(arr_products[i].division==b){a+='<div class="item">';a+='<a class="eachProduct" data-division="'+arr_products[i].division+'" data-product="'+i+'" href="">';a+="<h4>"+arr_products[i].name+"</h4>";var d=arr_products[i].description;if(d.length>=100){str_desc=d.substr(0,100)+"....."}else{str_desc=d}a+='<div><p class="shotdesc">'+str_desc+"</p></div>";a+="</a></div>"}}$("#productListDiv").html(a);hideLoading();$.mobile.changePage("#products")});$(document).on("click",".eachProduct",function(a){showLoading();selected_division=$(this).data("division");selected_product=$(this).data("product");currentProduct=arr_products[selected_product];var b="";b+="<h3>"+currentProduct.name+"</h3>";b+="<p>"+currentProduct.description+"</p>";$("#productDetails").html(b);$("#titleDiv2").html(divisions_name);$.mobile.changePage("#product")});$(document).on("click",".eachProductInPrdtPage",function(a){showLoading();selected_division=$(this).data("division");selected_product=$(this).data("product");currentProduct=arr_products[selected_product];var b="";b+="<h3>"+currentProduct.name+"</h3>";b+="<p>"+currentProduct.description+"</p>";$("#productDetails").html(b)});$(document).on("pageinit","#products",function(a){showDivisionSideBar("ui-serviceListPrdtsPage")});$(document).on("pagebeforeshow","#products",function(){showLoading();closeAllPanels()});$(document).on("pageshow","#products",function(){hideLoading()});$(document).on("pageinit","#product",function(a){showDivisionSideBar("ui-serviceListPrdtPage")});$(document).on("pagebeforeshow","#product",function(){closeAllPanels();showLoading();var b="";for(i=0;i<arr_products.length;i++){var a="";if("undefined"!==typeof arr_products[i].name){a=arr_products[i].name}if(arr_products[i].division==selected_division){b+='  <li data-icon="false"><a class="eachProduct" data-division="'+arr_products[i].division+'" data-product="'+i+'" href="#">'+a;b+="</a></li>"}}$("#ui-productsList").html(b);$("#ui-productsList").listview().listview("refresh");$("#ui-productsList").listview("refresh")});$(document).on("pageshow","#product",function(){hideLoading()});$(document).on("click",".panelControlLeft",function(a){closeRightPanel();if($(a.target).parents(".panel").hasClass("left-panel-open")){$(a.target).parents(".panel").removeClass("left-panel-open");$(this).removeClass("leftCntrlMove")}else{$(a.target).parents(".panel").addClass("left-panel-open");$(this).addClass("leftCntrlMove")}});function closeLeftPanel(){$(".left").removeClass("left-panel-open");$(".left").find(".control").removeClass("leftCntrlMove")}function closeRightPanel(){$(".right").removeClass("right-panel-open");$(".right").find(".control").removeClass("rightCntrlMove")}function closeAllPanels(){closeLeftPanel();closeRightPanel()};